#  1. 팀원 소개 🙋🏻‍♂️
| <img src="https://github.com/user-attachments/assets/4d49dfa7-601c-42ee-ba36-dea4ea83c01a" width="150" height="150"/> <br>  [이은성](https://github.com/mixedsider) <br>  팀장 <br> 👉ENTP👈 <br>  구매 <br> CICD <br> AWS 인프라 <br> [블로그](https://strnetwork.tistory.com/)  | <img src="https://github.com/user-attachments/assets/143433f4-dc79-4ca4-9cb4-a16406af4783" width="150" height="150"/> <br>  [박용준](https://github.com/dereck-jun) <br>  부팀장 <br>👉ISTJ👈 <br>  AWS 인프라 구성 <br> CI/CD 구축 <br>[블로그](https://velog.io/@dereck-jun)| <img src="https://github.com/user-attachments/assets/58cbd44d-6bab-4a73-bf93-c8da2621e518" width="150" height="150"/> <br>  [문성준](https://github.com/sjMun09) <br>  팀원 <br>👉ESTP👈<br>  USER <br> Elasticsearch & <br> Kibana <br> [블로그](https://velog.io/@ohoh7391/posts) |
|:--:|:--:|:--:|
| <img src="https://github.com/user-attachments/assets/89b22ae8-14c1-4bef-bdd3-d6f64b98900d" width="150" height="150"/> <br>  **[유은호](https://github.com/mapleclover)** <br>  팀원 <br>👉C.U.T.E👈 <br> Book <br> Kibana & <br> Logstash 시각화<br> [블로그](https://velog.io/@mapleclover) | <img src="https://github.com/user-attachments/assets/d550a0a2-592d-4dc1-8978-df02deb22c1a" width="150" height="150"/> <br>  **[이범서](https://github.com/polaris65b)** <br>  팀원 <br>👉ENTJ👈 <br>  Order(구매목록)<br> Review<br> 키워드 추천<br> 모니터링 <br> [블로그](https://polaris65b.tistory.com/) |

<hr>

# 2. 프로젝트 개요
**BookKing**, <br>
<i><b>당신의 완벽한 책 찾기 여정을 위한 스마트 도서 검색 서비스</b></i> <br><br>
더 이상 답답한 도서 검색에 시간을 낭비하지 마세요.<br>
BookKing은 사용자의 다양한 검색 조건에 **빠르고 정확하게 응답** 하는 혁신적인 키워드 기반 도서 검색 서비스입니다.<br>
BookKing과 함께라면, 당신이 원하는 바로 그 책을 손쉽게 찾을 수 있습니다.

**BookKing이 선사하는 편리하고 스마트한 검색 경험**

- **번개처럼 빠른 검색 속도:** 기다림 없이 즉각적으로 검색 결과를 확인하세요.
- **정확한 검색 결과:** 당신이 찾는 책을 놓치지 않고 정확하게 찾아드립니다.
- **똑똑한 검색 지원 기능**
    - **정확한 제목 검색:** 떠오르는 책 제목을 입력하는 순간, BookKing이 찾아드립니다.
    - **자동 완성 기능:** 검색어 입력을 도와 더욱 빠르고 편리하게 검색할 수 있습니다.
    - **연관 검색 기능:** 검색한 내용과 유사한 검색어 키워드를 보여줘서 비슷한 내용을 빠르게 검색을 해볼 수 있습니다. ****
    - **AI 연관 키워드 추천:** 인공지능이 당신의 검색 의도를 파악하여 생각지도 못했던 흥미로운 책들을 추천해 줍니다. 새로운 발견의 즐거움을 BookKing이 선사합니다.

BookKing은 단순한 도서 검색 서비스를 넘어, 당신의 독서 생활을 더욱 풍요롭고 편리하게 만들어 줄 것입니다.<br>
지금 바로 BookKing을 경험하고, 원하는 책을 그 어느 때보다 쉽고 빠르게 찾아보세요!
- **서비스 웹사이트**  
  [https://app.tomorrowlearncamp.xyz](https://app.tomorrowlearncamp.xyz)
- **Notion 문서** <br>
  [BookKing 프로젝트 노션](https://www.notion.so/teamsparta/16-Bookking-1e22dc3ef514809e91f6e1d0aef42603)

<hr>

# 3. 기술 스택

<b>Backend</b>
<p>
  <img alt="Java" src="https://img.shields.io/badge/Java-ED8B00?logo=java&logoColor=white&style=flat-square" />
  <img alt="Spring Boot" src="https://img.shields.io/badge/Spring%20Boot-6DB33F?logo=springboot&logoColor=white&style=flat-square" />
  <img alt="Gradle" src="https://img.shields.io/badge/Gradle-02303A?logo=gradle&logoColor=white&style=flat-square" />
</p>

<b>Test</b>

<p>
  <img alt="nGrinder" src="https://img.shields.io/badge/nGrinder-FF6D00?style=flat-square" />
  <img alt="JUnit" src="https://img.shields.io/badge/JUnit-C21325?logo=junit&logoColor=white&style=flat-square" />
</p>

<b>Security</b>
<p>
  <img alt="Spring Security" src="https://img.shields.io/badge/Spring%20Security-6DB33F?logo=springsecurity&logoColor=white&style=flat-square" />
  <img alt="JWT" src="https://img.shields.io/badge/JWT-000000?logo=jsonwebtokens&logoColor=white&style=flat-square" />
</p>

<b>Collaboration</b> 
<p>
  <img alt="GitHub" src="https://img.shields.io/badge/GitHub-181717?logo=github&logoColor=white&style=flat-square" />
  <img alt="Notion" src="https://img.shields.io/badge/Notion-000000?logo=notion&logoColor=white&style=flat-square" />
  <img alt="Slack" src="https://img.shields.io/badge/Slack-4A154B?logo=slack&logoColor=white&style=flat-square" />
  <img alt="ERD Cloud" src="https://img.shields.io/badge/ERD%20Cloud-00AEEF?style=flat-square" />
</p>

<b>Monitoring</b> 
<p>
  <img alt="Prometheus" src="https://img.shields.io/badge/Prometheus-E6522C?logo=prometheus&logoColor=white&style=flat-square" />
  <img alt="Grafana" src="https://img.shields.io/badge/Grafana-F46800?logo=grafana&logoColor=white&style=flat-square" />
</p>

<b>Other Tools</b> 
<p>
  <img alt="QueryDSL" src="https://img.shields.io/badge/QueryDSL-000000?style=flat-square" />
  <img alt="Postman" src="https://img.shields.io/badge/Postman-FF6C37?logo=postman&logoColor=white&style=flat-square" />
  <img alt="JaCoCo" src="https://img.shields.io/badge/JaCoCo-0052A5?logo=jacoco&logoColor=white&style=flat-square" />
  <img alt="SonarQube" src="https://img.shields.io/badge/SonarQube-4E9BCD?logo=sonarqube&logoColor=white&style=flat-square" />
  <img alt="Swagger" src="https://img.shields.io/badge/Swagger-85EA2D?logo=swagger&logoColor=white&style=flat-square" />
</p>

<b>Database, Analysis & Optimization</b>
<p>
  <img alt="MySQL" src="https://img.shields.io/badge/MySQL-4479A1?logo=mysql&logoColor=white&style=flat-square" />
  <img alt="Redis" src="https://img.shields.io/badge/Redis-D82C20?logo=redis&logoColor=white&style=flat-square" />
  <img alt="Kibana" src="https://img.shields.io/badge/Kibana-005571?logo=kibana&logoColor=white&style=flat-square" />
  <img alt="Logstash" src="https://img.shields.io/badge/Logstash-005571?logo=logstash&logoColor=white&style=flat-square" />
  <img alt="Elasticsearch" src="https://img.shields.io/badge/Elasticsearch-005571?logo=elasticsearch&logoColor=white&style=flat-square" />
</p>

<b>Deployment & Distribution</b>
<p>
  <img alt="GitHub Actions" src="https://img.shields.io/badge/GitHub%20Actions-2088FF?logo=githubactions&logoColor=white&style=flat-square" />
  <img alt="Docker" src="https://img.shields.io/badge/Docker-2496ED?logo=docker&logoColor=white&style=flat-square" />
  <img alt="Jenkins" src="https://img.shields.io/badge/Jenkins-D24939?logo=jenkins&logoColor=white&style=flat-square" />
  <img alt="AWS" src="https://img.shields.io/badge/AWS-232F3E?logo=amazonaws&logoColor=white&style=flat-square" />
  <img alt="EC2" src="https://img.shields.io/badge/EC2-FF9900?logo=amazonaws&logoColor=white&style=flat-square" />
  <img alt="RDS" src="https://img.shields.io/badge/RDS-527FFF?logo=amazonaws&logoColor=white&style=flat-square" />
  <img alt="ElastiCache" src="https://img.shields.io/badge/ElastiCache-4053D6?logo=amazonaws&logoColor=white&style=flat-square" />
  <img alt="S3" src="https://img.shields.io/badge/S3-569A31?logo=amazonaws&logoColor=white&style=flat-square" />
  <img alt="CloudFront" src="https://img.shields.io/badge/CloudFront-2293B8?logo=amazonaws&logoColor=white&style=flat-square" />
  <img alt="Route 53" src="https://img.shields.io/badge/Route%2053-FF9900?logo=amazonaws&logoColor=white&style=flat-square" />
  <img alt="ALB" src="https://img.shields.io/badge/ALB-0084FF?logo=amazonaws&logoColor=white&style=flat-square" />
  <img alt="VPC" src="https://img.shields.io/badge/VPC-FF9900?logo=amazonaws&logoColor=white&style=flat-square" />
  <img alt="ECS" src="https://img.shields.io/badge/ECS-256CFF?logo=amazonaws&logoColor=white&style=flat-square" />
  <img alt="Aurora" src="https://img.shields.io/badge/Aurora-400090?logo=amazonaws&logoColor=white&style=flat-square" />
</p>

<hr>

# 4. ERD 설계
![image](https://github.com/user-attachments/assets/7f8bced7-7ebb-4a97-ab3d-23efbe803a07)

<hr>

# 5. 주요 기능 및 API 명세서
![image](https://github.com/user-attachments/assets/9bea02f9-f0fa-421d-943e-fc1dcaa4bcc6) <br><br>
![image](https://github.com/user-attachments/assets/191bb6ef-d7d2-43f1-bc7d-e3b296f0eb8e) <br><hr>
<b>사용자 로그 수집</b><br>
![image](https://github.com/user-attachments/assets/ae1bcfc4-5fd5-456d-b6f6-fdab2805eca7) <br><hr>


## 📌 주요 기능

|  기능 |  설명 |
|--------|--------|
| **책 정보 관리** | 중앙 도서관 openAPI로부터 책 데이터 핸들링 |
| **검색 기능** | 사용자 키워드 기반 자동 완성 기능, 연관 검색어 추천 |
| **사용자 로그 수집** | 사용자 구매 로그 정보로 사용자 수요 조사 |
| **인공지능 사용자 맞춤 추천** | 사용자 키워드 검색 및 구매 목록을 기반, 사용자 맞춤 책 키워드로 검색 및 추천 | 
<br>

<hr>

# 6. 서비스 플로우

## API 명세서 <br>
### Auth API
| 기능 | method | URL | requestHeader | requestBody | responseBody | responseStatus |
|:----:|:------:|:---:|:-------------:|:-----------:|:------------:|:---------------:|
| 회원 가입 | POST | /api/v1/auth/signup | - | SignupRequest | SignupResponse | 200 OK<br>400 BAD_REQUEST |
| 유저 로그인 (email) | POST | /api/v1/auth/login | - | LoginRequest | LoginResponse | 200 OK<br>400 BAD_REQUEST |
| 토큰 재발급 | POST | /api/v1/auth/refresh | Authorization | - | 재발급 Response | 200 OK<br>400 BAD_REQUEST |

### User API
| 기능             | method | URL                          | requestHeader           | requestBody           | requestParam | responseBody  | responseStatus         |
|:----------------:|:------:|:-----------------------------:|:------------------------:|:----------------------:|:------------:|:--------------:|:------------------------:|
| 회원&nbsp;조회      | GET    | /api/v1/users/myInfo         | Authorization           | -                    | -            | UserResponse   | 200 OK<br>400 BAD_REQUEST |
| 회원&nbsp;수정      | PATCH  | /api/v1/users/myInfo         | Authorization           | UpdateUserRequest     | -            | UserResponse   | 200 OK<br>400 BAD_REQUEST |
| ADMIN&nbsp;권한&nbsp;부여 | PATCH  | /api/v1/users/{userId}/role  | Authorization           | UpdateUserRoleRequest | -            | UserResponse   | 200 OK<br>400 BAD_REQUEST |
| 회원&nbsp;탈퇴      | DELETE | /api/v1/users/{userId}       | Authorization, password | -                    | -            | -              | 200 OK<br>400 BAD_REQUEST |
| 프로필<br>업로드   | POST   | /v1/users/profile-image      | Authorization           | image                 | -            | -              | 200 OK<br>400 BAD_REQUEST |

### Book API
| 기능 | method | URL | requestHeader | requestBody | requestParam | responseBody | responseStatus |
|:----:|:------:|:---:|:-------------:|:-----------:|:------------:|:------------:|:--------------:|
| OpenAPI 책 검색 | POST | /api/v1/books/search | - | SearchBookRequestDto | - | SearchBookResponseDto | 200 OK<br>500 SERVER_ERROR |
| OpenAPI 책 DB에 추가 | POST | /api/v1/books/import | - | - | pageSize, totalPage | - | 200 OK<br>500 SERVER_ERROR |
| 새로운 책 등록 | POST | /api/v1/books | Authorization(ADMIN) | AddBookRequestDto | - | 1 | 200 OK<br>400 BAD_REQUEST |
| 책 내용 수정 | PATCH | /api/v1/books/{bookId} | Authorization(ADMIN) | UpdateBookRequestDto | - | - | 200 OK<br>404 NOT_FOUND |
| 책 수량 수정 | PATCH | /api/v1/books/{bookId}/stock | Authorization(ADMIN) | UpdateBookStockRequestDto | - | - | 200 OK<br>404 NOT_FOUND |
| 책 삭제 | DELETE | /api/v1/books/{bookId} | Authorization(ADMIN) | - | - | - | 200 OK<br>404 NOT_FOUND |
| 책 목록 가져오기 | GET | /api/v1/books | - | - | - | BookResponseDto | 200 OK |
| 책<br>가져오기 | GET | /api/v1/books/{bookId} | - | - | - | Page&lt;BookResponseDto&gt; | 200 OK |

### Search API
| 기능 | method | URL | requestHeader | requestBody | requestParam | responseBody | responseStatus |
|:----:|:------:|:---:|:-------------:|:-----------:|:------------:|:------------:|:--------------:|
| 검색 | GET | /api/v1/elasticsearch | - | - | keyword | Page<br>&lt;ElasticBookSearchResponseDto&gt; | 200 OK<br>500 SERVER_ERROR |
| 자동완성 | GET | /api/v3/elasticsearch/autocomplete | - | - | keyword, size | List&lt;String&gt; | 200 OK<br>500 SERVER_ERROR |
| 연관 검색어 | GET | /api/v1/elasticsearch/relate | - | - | keyword | List&lt;String&gt; | 200 OK<br>500 SERVER_ERROR |

### Keyword API
| 기능 | method | URL | requestHeader | requestBody | requestParam | responseBody | responseStatus |
|:----:|:------:|:---:|:-------------:|:-----------:|:------------:|:------------:|:--------------:|
| 키워드 입력해서 받기 | POST | /api/v1/keywords/suggest | - | KeywordRequest | - | 결제 | 400 BAD_REQUEST, 200 OK |
| 구매목록 기반 키워드 | GET | /api/v1/keywords/recommendations | Authorization(JWT) | - | - | 결제 | 400 BAD_REQUEST, 200 OK |

### Order API
| 기능 | method | URL | requestHeader | requestBody | requestParam | responseBody | responseStatus |
|:----:|:------:|:---:|:-------------:|:-----------:|:------------:|:------------:|:--------------:|
| 주문 목록조회 | GET | /api/v1/orders/myInfo | Authorization(User) | - | - | Page&lt;OrderResponse&gt; | 200 OK<br>400 BAD_REQUEST |

### Payment API
| 기능 | method | URL | requestHeader | requestBody | requestParam | responseBody | responseStatus |
|:----:|:------:|:---:|:-------------:|:-----------:|:------------:|:------------:|:--------------:|
| 결제 | POST | /api/v1/payments | Authorization(JWT) | PaymentBuyRequest | - | 결제 | 400 BAD_REQUEST, 200 OK |
| 결제 취소 | POST | /v1/payment/{orderId} | Authorization(JWT) | - | - | PaymentReturnResponse | 400 BAD_REQUEST, 200 OK |

### Review API
| 기능 | method | URL | requestHeader | requestBody | requestParam | responseBody | responseStatus |
|:----:|:------:|:---:|:-------------:|:-----------:|:------------:|:------------:|:--------------:|
| 리뷰 생성 | POST | /api/v1/books/{bookId}/reviews | Authorization(USER) | ReviewRequest | - | - | 200 OK, 400 BAD_REQUEST |
| 리뷰 조회 | GET | /api/v1/books/{bookId}/reviews | - | - | - | Page&lt;ReviewResponse&gt; | 200 OK, 400 BAD_REQUEST |
| 리뷰 수정 | PATCH | /api/v1/books/{bookId}/reviews/{reviewId} | Authorization(USER) | ReviewUpdateRequest | - | - | 200 OK, 400 BAD_REQUEST |
| 리뷰 삭제 | DELETE | /api/v1/books/{bookId}/reviews/{reviewId} | Authorization(USER) | - | - | - | 200 OK, 400 BAD_REQUEST |
| 내가 쓴 리뷰 | GET | /api/v1/reviews/my | Authorization(USER) | - | page, size | List&lt;ReviewResponse&gt; | 200 OK, 400 BAD_REQUEST |


<hr>

# 7. 프로젝트 아키텍처
![image](https://github.com/user-attachments/assets/beb5f99e-78e9-4a69-af82-6531f2a681ad)

<hr>


# 8. 모니터링 (그라파나)

<hr>

# 9. 기술적 의사 결정 및 트러블 슈팅

<hr>

# 10. 테스트 환경 실행

<h4>실행 환경 준비</h4>

.local.env 을 만들어준다.
```
DB_PASSWORD="DB_PASSWORD"
LOGSTASH_SERVER="logstash-container:5044"
SPRING_PROFILE=dev

LIBRARY_API_KEY="YOUR_API_KEY"

AWS_ACCESS_KEY="AWS_IAM_ACCESS_KEY"
AWS_SECRET_KEY="AWS_IAM_PRIVATE_KEY"
```
LOGSTAH_SERVER,SPRING_PROFILE은 고정값이다.

추가적으로 값을 넣고 싶다면 application-{이름}.yml 을 만들고 
SPRING_PROFILE={이름} 을 넣으면 된다.

<h4>실행 방법</h4>

```
cd {project_directory}
docker-compose -f docker-compose.local.yml --env-file .local.env config
docker-compose -f docker-compose.local.yml build
docker-compose up -d
```

<h4>재 빌드</h4>

```
docker-compose down
docker-compose -f docker-compose.local.yml build
docker-compose up -d
```
